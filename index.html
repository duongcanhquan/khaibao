<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CỔNG ĐĂNG KÝ TRỰC TUYẾN</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --glass-white: rgba(255, 255, 255, 0.95); /* [cite: 31] */
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%); /* [cite: 32] */
        }

        body {
            font-family: 'Montserrat', sans-serif; /* [cite: 29] */
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab); /* [cite: 30] */
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .glass-card {
            background: var(--glass-white);
            backdrop-filter: blur(10px); /* [cite: 31] */
            border-radius: 20px; /* [cite: 31] */
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 20px 50px rgba(0,0,0,0.15); /* [cite: 31] */
            width: 100%;
            max-width: 850px;
            overflow: hidden;
        }

        .header-section {
            text-align: center;
            padding: 30px 20px;
            background: rgba(255,255,255,0.5);
            border-bottom: 1px solid #eee;
        }

        .logo-img { max-width: 180px; margin-bottom: 15px; }

        .title-main { font-weight: 800; color: #333; font-size: 1.6rem; letter-spacing: -0.5px; } /*  */
        .sub-header { font-size: 0.8rem; font-weight: 600; color: #555; line-height: 1.5; max-width: 600px; margin: 10px auto; } /* [cite: 4] */
        .contact-header { font-size: 0.85rem; font-weight: 700; color: #764ba2; } /* [cite: 5, 6] */

        .form-body { padding: 30px; }
        .section-title {
            font-size: 0.95rem;
            font-weight: 800;
            color: #764ba2;
            text-transform: uppercase;
            border-left: 4px solid #667eea;
            padding-left: 10px;
            margin: 25px 0 15px 0;
        }

        .form-label { font-weight: 700; font-size: 0.85rem; color: #444; margin-bottom: 6px; }
        .form-control, .form-select {
            border-radius: 12px;
            padding: 10px 15px;
            border: 1.5px solid #ececec;
            font-size: 0.95rem;
            transition: 0.3s;
        }

        .form-control:focus { border-color: #667eea; box-shadow: 0 0 0 4px rgba(102,126,234,0.1); }

        .btn-submit {
            background: var(--primary-gradient);
            border: none;
            border-radius: 50px; /* [cite: 32] */
            color: white;
            padding: 16px;
            font-weight: 800; /*  */
            width: 100%;
            font-size: 1.1rem;
            margin-top: 30px;
            transition: 0.3s;
        }
        .btn-submit:hover { transform: scale(1.02); box-shadow: 0 10px 25px rgba(118,75,162,0.4); }

        .footer-note {
            background: #fdf2f2;
            padding: 20px;
            border-radius: 12px;
            margin-top: 30px;
            font-size: 0.85rem;
            color: #d9534f;
            line-height: 1.6;
            border: 1px dashed #d9534f;
        }

        /* Mobile Optimization  */
        @media (max-width: 768px) {
            .form-body { padding: 20px; }
            .title-main { font-size: 1.3rem; }
            .section-title { font-size: 0.85rem; }
        }
    </style>
</head>
<body>

<div class="glass-card animate__animated animate__fadeInUp">
    <div class="header-section">
        <img src="https://github.com/duongcanhquan/image/blob/main/Logo%20Cao%20%C4%91a%CC%86%CC%89ng%20Vie%CC%A3%CC%82t%20My%CC%83%20-%20ba%CC%89n%20chua%CC%82%CC%89n%202025-01.png?raw=true" class="logo-img">
        <h2 class="title-main">CỔNG ĐĂNG KÝ TRỰC TUYẾN</h2>
        <p class="sub-header">TRƯỜNG CAO ĐẲNG THỰC HÀNH HÀNG ĐẦU TẠI MIỀN BẮC - ĐÀO TẠO ĐA NGÀNH NGHỀ - HỖ TRỢ GIỚI THIỆU VIỆC LÀM SAU KHI RA TRƯỜNG CHO SINH VIÊN</p>
        <div class="contact-header">
            <i class="fa-solid fa-location-dot me-1"></i> Số 168 Trịnh Văn Bô - Nam Từ Liêm - Hà Nội <br>
            <i class="fa-solid fa-phone me-1"></i> 02473051212 - 0982856648
        </div>
    </div>

    <form id="regForm" class="form-body">
        <div class="section-title">1. Thông tin cá nhân</div>
        <div class="row g-3">
            <div class="col-md-6">
                <label class="form-label">Họ và tên *</label>
                <input type="text" name="fullName" class="form-control" placeholder="NGUYỄN VĂN A" required>
            </div>
            <div class="col-md-3 col-6">
                <label class="form-label">Ngày sinh *</label>
                <input type="date" name="dob" class="form-control" required>
            </div>
            <div class="col-md-3 col-6">
                <label class="form-label">Giới tính *</label>
                <select name="gender" class="form-select" required>
                    <option value="Nam">Nam</option>
                    <option value="Nữ">Nữ</option>
                </select>
            </div>
            <div class="col-md-4">
                <label class="form-label">Số CCCD *</label>
                <input type="text" name="cccd" class="form-control" placeholder="12 chữ số" required>
            </div>
            <div class="col-md-4 col-6">
                <label class="form-label">SĐT Cá nhân *</label>
                <input type="tel" name="phone" class="form-control" pattern="[0-9]{10}" placeholder="09xxxxxxxx" required>
            </div>
            <div class="col-md-4 col-6">
                <label class="form-label">SĐT Phụ huynh *</label>
                <input type="tel" name="parentPhone" class="form-control" pattern="[0-9]{10}" placeholder="09xxxxxxxx" required>
            </div>
            <div class="col-12">
                <label class="form-label">Email cá nhân *</label>
                <input type="email" name="email" class="form-control" placeholder="vidu@gmail.com" required>
            </div>
            <div class="col-12">
                <label class="form-label">Địa chỉ thường trú *</label>
                <input type="text" name="address" class="form-control" placeholder="Số nhà, Phường/Xã, Quận/Huyện, Tỉnh..." required>
            </div>
        </div>

        <div class="section-title">2. Thông tin học vấn</div>
        <div class="row g-3">
            <div class="col-md-6">
                <label class="form-label">Trường THPT hoặc THCS *</label>
                <input type="text" name="school" class="form-control" placeholder="Nhập tên trường đã tốt nghiệp" required>
            </div>
            <div class="col-md-6">
                <label class="form-label">Hiện đang là *</label>
                <select name="situation" class="form-select" required>
                    <option value="Học sinh lớp 12">Học sinh lớp 12</option>
                    <option value="Học sinh lớp 9">Học sinh lớp 9</option>
                    <option value="Đã tốt nghiệp">Đã tốt nghiệp</option>
                </select>
            </div>
            <div class="col-md-6">
                <label class="form-label">Điểm số trung bình *</label>
                <select id="scoreSelect" class="form-select" required onchange="checkCustomScore(this.value)">
                    <option value="">-- Chọn mức điểm --</option>
                    <option value="6.5-7.9">6.5-7.9</option>
                    <option value="8.0-9.0">8.0-9.0</option>
                    <option value="5.0-6.4">5.0-6.4</option>
                    <option value="Khác">Khác...</option>
                </select>
                <input type="text" id="customScore" class="form-control mt-2 d-none" placeholder="Nhập điểm cụ thể (VD: 8.5)">
            </div>
            <div class="col-md-6">
                <label class="form-label">Hệ đào tạo đăng ký *</label>
                <select name="eduSystem" class="form-select" required>
                    <option value="Cao đẳng chính quy">Cao đẳng chính quy</option>
                    <option value="Phổ thông cao đẳng">Phổ thông cao đẳng</option>
                </select>
            </div>
        </div>

        <div class="section-title">3. Nguyện vọng & Tư vấn</div>
        <div class="row g-3">
            <div class="col-md-6">
                <label class="form-label">Ngành học đăng ký *</label>
                <select name="major" id="majorSelect" class="form-select" required>
                    <option value="">Đang tải danh sách ngành...</option>
                </select>
            </div>
            <div class="col-md-6">
                <label class="form-label">Thầy/Cô tư vấn *</label>
                <select name="counselor" id="counselorSelect" class="form-select" required>
                    <option value="">Đang tải danh sách...</option>
                </select>
            </div>
        </div>

        <button type="submit" class="btn btn-submit shadow-lg">GỬI HỒ SƠ ĐĂNG KÝ NGAY</button>

        <div class="footer-note">
            <strong>* Lưu ý đặc biệt:</strong> Thí sinh có học lực từ 8.0 trở lên sẽ được tuyển thẳng. Thông tin là do thí sinh đăng ký là cơ sở để Nhà trường xét tuyển. Nếu thông tin về điểm xét tuyển không chính xác, kết quả xét tuyển của thí sinh sẽ bị huỷ kể cả khi đã nhận được giấy báo trúng tuyển của Nhà trường. Kết quả xét tuyển sẽ được bảo lưu đến hết ngày 31/12/2025.
        </div>
    </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxnALJXRzyKynbXrfSqyXbLnGkBlf-THPeypfQzABZ2ZoCk68hTppfGu9wA5d2HQXBT/exec';

    // Load Data
    window.addEventListener('DOMContentLoaded', () => {
        fetch(SCRIPT_URL).then(res => res.json()).then(data => {
            document.getElementById('majorSelect').innerHTML = '<option value="">-- Chọn ngành học --</option>' + data.nganh.map(n => `<option value="${n}">${n}</option>`).join('');
            document.getElementById('counselorSelect').innerHTML = '<option value="">-- Chọn tư vấn viên --</option>' + data.tuvan.map(t => `<option value="${t}">${t}</option>`).join('');
        });
    });

    function checkCustomScore(val) {
        const inp = document.getElementById('customScore');
        val === 'Khác' ? (inp.classList.remove('d-none'), inp.required = true) : (inp.classList.add('d-none'), inp.required = false);
    }

    document.getElementById('regForm').onsubmit = async (e) => {
        e.preventDefault();
        const formData = Object.fromEntries(new FormData(e.target));
        const scoreVal = document.getElementById('scoreSelect').value;
        formData.score = (scoreVal === 'Khác') ? document.getElementById('customScore').value : scoreVal;

        Swal.fire({ title: 'Đang xử lý...', allowOutsideClick: false, didOpen: () => Swal.showLoading() });

        try {
            const res = await fetch(SCRIPT_URL, { method: 'POST', body: JSON.stringify(formData) });
            const result = await res.json();
            if(result.result === 'success') {
                Swal.fire('Thành công!', `Mã SV: ${result.studentId}. Chúc mừng bạn đã hoàn thành đăng ký!`, 'success');
                e.target.reset();
                document.getElementById('customScore').classList.add('d-none');
            }
        } catch (e) { Swal.fire('Lỗi', 'Kết nối thất bại, vui lòng thử lại!', 'error'); }
    };
</script>
</body>
</html>
