<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng Ký Tuyển Sinh</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>body{font-family:'Montserrat',sans-serif;background:#f4f6f9;padding:20px}.main-form{max-width:800px;margin:0 auto;background:#fff;padding:40px;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.1)}</style>
</head>
<body>
    <div class="main-form">
        <h3 class="text-center text-primary fw-bold mb-4">HỒ SƠ XÉT TUYỂN TRỰC TUYẾN</h3>
        <form id="frm" onsubmit="sub(event)">
            <div class="row g-3">
                <div class="col-md-8"><label>Họ và Tên (In hoa) *</label><input type="text" id="fullName" class="form-control" required placeholder="NGUYỄN VĂN A"></div>
                <div class="col-md-4"><label>Ngày sinh *</label><input type="date" id="dob" class="form-control" required></div>
                
                <div class="col-md-6"><label>Số CCCD *</label><input type="text" id="cccd" class="form-control" required minlength="9" maxlength="12"></div>
                <div class="col-md-6"><label>SĐT Cá nhân *</label><input type="tel" id="phone" class="form-control" required></div>
                <div class="col-md-6"><label>Email</label><input type="email" id="email" class="form-control"></div>
                <div class="col-md-6"><label>SĐT Phụ huynh *</label><input type="tel" id="motherPhone" class="form-control" required></div>
                
                <div class="col-12"><label>Địa chỉ liên hệ</label><input type="text" id="address" class="form-control" required></div>
                <div class="col-12"><label>Trường THPT/THCS</label><input type="text" id="highSchool" class="form-control" required></div>

                <div class="col-md-6"><label>Hệ đào tạo</label>
                    <select id="educationSystem" class="form-select">
                        <option>Cao đẳng chính quy</option><option>Phổ thông cao đẳng</option>
                    </select>
                </div>
                <div class="col-md-6"><label>Đối tượng</label>
                    <select id="situation" class="form-select">
                        <option>Học sinh lớp 12</option><option>Đã tốt nghiệp</option><option>Học sinh lớp 9</option>
                    </select>
                </div>

                <div class="col-md-6"><label>Ngành đăng ký *</label><select id="major" class="form-select" required><option value="">Đang tải...</option></select></div>
                <div class="col-md-6"><label>Cán bộ tư vấn *</label><select id="counselor" class="form-select" required><option value="">Đang tải...</option></select></div>
                
                <div class="col-12"><label>Điểm số (TB)</label><input type="text" id="score" class="form-control"></div>
                
                <div class="col-12 mt-4"><button id="btn" class="btn btn-primary w-100 py-3 fw-bold">GỬI HỒ SƠ</button></div>
            </div>
        </form>
    </div>

    <script>
        const URL = "https://script.google.com/macros/s/AKfycbygoQ8idag7_EEarxZ1euiXvhPGKKNpphwcJ31g_7UQA0QcXMJMM7MR1hVQd-1Juys/exec"; // Thay Link vào đây

        function cb(d) {
            if(d.status=='success'){
                let m=document.getElementById('major'), c=document.getElementById('counselor');
                m.innerHTML='<option value="">-- Chọn Ngành --</option>'; d.majors.forEach(x=>m.add(new Option(x,x)));
                c.innerHTML='<option value="">-- Chọn TVV --</option>'; d.counselors.forEach(x=>c.add(new Option(x,x)));
            }
        }

        window.onload = function() {
            let s = document.createElement('script');
            s.src = `${URL}?action=get_lists&callback=cb&t=${Date.now()}`;
            document.body.appendChild(s);
        }

        function sub(e) {
            e.preventDefault();
            let btn = document.getElementById('btn');
            btn.innerText = "Đang gửi..."; btn.disabled = true;

            let data = {
                fullName: document.getElementById('fullName').value,
                dob: document.getElementById('dob').value,
                cccd: document.getElementById('cccd').value,
                phone: document.getElementById('phone').value,
                email: document.getElementById('email').value,
                motherPhone: document.getElementById('motherPhone').value,
                address: document.getElementById('address').value,
                highSchool: document.getElementById('highSchool').value,
                educationSystem: document.getElementById('educationSystem').value,
                situation: document.getElementById('situation').value,
                major: document.getElementById('major').value,
                counselor: document.getElementById('counselor').value,
                score: document.getElementById('score').value
            };

            fetch(URL, {
                method: 'POST', mode: 'no-cors',
                body: JSON.stringify(data),
                headers: {'Content-Type': 'text/plain'}
            }).then(()=>{
                Swal.fire('Thành công','Đã gửi hồ sơ!','success').then(()=>location.reload());
            }).catch(()=>{alert('Lỗi mạng'); btn.disabled=false;});
        }
    </script>
</body>
</html>
